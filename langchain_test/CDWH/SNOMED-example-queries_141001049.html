<!DOCTYPE html>
<html>
    <head>
        <title>DataWarehouse : SNOMED example queries</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DataWarehouse</a></span>
                            </li>
                                                    <li>
                                <span><a href="DataWarehouse_33423377.html">DataWarehouse</a></span>
                            </li>
                                                    <li>
                                <span><a href="FAQ-CDWH-Analysis_33424229.html">FAQ CDWH Analysis</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DataWarehouse : SNOMED example queries
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicole Goebel</span> on Feb. 22, 2023
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>-- Display of all fields for the current version of a given concept<br/>SELECT	*<br/>FROM	CDWH.V_IL_DIM_CONCEPT_SNOMED_CID<br/>WHERE	1=1<br/>AND		COSN_NK = 428527002 -- ConceptID for Human tetanus immunoglobulin (substance)<br/>AND		COSN_CODE_SYSTEM_EDITION_NK = 'SwissEdition' -- Filter for Swiss Edition</p><p>-- Display of all fields for a specific concept in the past<br/>SELECT	*<br/>FROM	CDWH.V_IL_DIM_CONCEPT_SNOMED_HIST_CID<br/>WHERE	1=1<br/>AND		COSN_NK = 428527002 -- ConceptID for Human tetanus immunoglobulin (substance)<br/>AND		TO_SECONDDATE('2021-12-31') BETWEEN COSN_EFFECTIVETIME_FROM AND COSN_EFFECTIVETIME_TO -- Restriction to a specific Snomed version from the past<br/>AND		COSN_CODE_SYSTEM_EDITION_NK = 'International' -- Filter for International Edition </p><p>-- Display of all fields for the current and active FSN and synonyms of a given concept (Terms, Join via Concept on Term)<br/>SELECT	c.COSN_BK, t.*<br/>FROM	CDWH.V_IL_DIM_CONCEPT_SNOMED_CID c<br/>		INNER JOIN CDWH.V_IL_DIM_TERM_SNOMED_CID t ON t.COSN_BK = c.COSN_BK<br/>WHERE	1=1<br/>AND		c.COSN_NK = 428527002 -- ConceptID for Human tetanus immunoglobulin (substance)<br/>AND		c.COSN_CODE_SYSTEM_EDITION_NK = 'International' -- Filter for International Edition<br/>AND		t.TESN_ACTIVE_FLAG = 1 -- Active terms only<br/>AND		t.TESN_LANGUAGE_CODE = 'en' -- English terms only</p><p>-- Display all fields for the active FSN and synonyms of a given concept in the past (Terms, Join via Concept on Term)<br/>SELECT	c.COSN_HIST_BK, t.*<br/>FROM	CDWH.V_IL_DIM_CONCEPT_SNOMED_HIST_CID c<br/>		INNER JOIN CDWH.V_IL_DIM_TERM_SNOMED_HIST_CID t ON t.COSN_NK = c.COSN_NK AND t.TESN_CODE_SYSTEM_EDITION_NK = c.COSN_CODE_SYSTEM_EDITION_NK<br/>WHERE	1=1<br/>AND		c.COSN_NK = 428527002 -- ConceptID for Human tetanus immunoglobulin (substance)<br/>AND		TO_SECONDDATE('2021-12-31') BETWEEN c.COSN_EFFECTIVETIME_FROM AND c.COSN_EFFECTIVETIME_TO -- Restriction to a specific Snomed version from the past<br/>AND		TO_SECONDDATE('2021-12-31') BETWEEN t.TESN_EFFECTIVETIME_FROM AND t.TESN_EFFECTIVETIME_TO -- Restriction to a specific Snomed version from the past<br/>AND		COSN_CODE_SYSTEM_EDITION_NK = 'SwissEdition' -- Filter for Swiss Edition<br/>AND		t.TESN_ACTIVE_FLAG = 1 -- Active terms only<br/>AND		t.TESN_LANGUAGE_CODE IN ('de','fr') -- German and French terms only</p><p>-- Query a concept in the horizontal hierarchy, only active concepts are included here<br/>-- International and SwissEdition are combined in the same hierarchy<br/>SELECT	*<br/>FROM	CDWH.V_IL_DIM_HIER_HORIZONTAL_SNOMED_CID<br/>WHERE	1=1<br/>AND		HHSN_LEAF_COSN_NK = 428527002<br/>ORDER BY HHSN_BK ASC</p><p>-- Example of a concept that is set to inactive in International and reactivated in SwissEdition<br/>SELECT	*<br/>FROM	CDWH.V_IL_DIM_HIER_HORIZONTAL_SNOMED_CID<br/>WHERE	1=1<br/>AND		HHSN_LEAF_COSN_NK = 394747008<br/>--AND		HHSN_RESN_CODE_SYSTEM_EDITION_NK = 'SwissEdition'<br/>ORDER BY HHSN_BK ASC</p><p>-- Again the same two queries on the vertical hierarchy, this one also contains only active concepts<br/>SELECT	HVSN_BK, HVSN_ANCESTOR_COSN_BK, HVSN_ANCESTOR_COSN_NK, HVSN_DESCENDENT_COSN_BK, HVSN_DESCENDENT_COSN_NK, HVSN_DEPTH, HVSN_ROOT_FLAG, HVSN_LEAF_FLAG, HVSN_ANCESTOR_FULLY_SPECIFIED_NAME, HVSN_DESCENDENT_FULLY_SPECIFIED_NAME<br/>FROM	CDWH.V_IL_DIM_HIER_VERTICAL_SNOMED_CID<br/>WHERE	1=1<br/>AND		HVSN_DESCENDENT_COSN_NK = 428527002<br/>ORDER BY HVSN_DEPTH DESC</p><p>-- Levels 3 to 0 have been reactivated in the SwissEdition, levels 4 and 5 are still active in the International and the reactivated records are attached to them<br/>SELECT	HVSN_BK, HVSN_ANCESTOR_COSN_BK, HVSN_ANCESTOR_COSN_NK, HVSN_DESCENDENT_COSN_BK, HVSN_DESCENDENT_COSN_NK, HVSN_DEPTH, HVSN_ROOT_FLAG, HVSN_LEAF_FLAG, HVSN_ANCESTOR_FULLY_SPECIFIED_NAME, HVSN_DESCENDENT_FULLY_SPECIFIED_NAME<br/>FROM	CDWH.V_IL_DIM_HIER_VERTICAL_SNOMED_CID<br/>WHERE	1=1<br/>AND		HVSN_DESCENDENT_COSN_NK = 394747008<br/>ORDER BY HVSN_DEPTH DESC</p><p>-- Example of Relationships, from and to this concept. The Relationship Type &quot;Is a (attribute)&quot; is used to build the hierarchy (RESN_TYPE_ID = 116680003).<br/>SELECT	RESN_TYPE_ID, RESN_TYPE, RESN_PARENT_COSN_BK, RESN_PARENT_COSN_NK, RESN_PARENT_FULLY_SPECIFIED_NAME, RESN_CHILD_COSN_BK, RESN_CHILD_COSN_NK, RESN_CHILD_FULLY_SPECIFIED_NAME<br/>FROM	CDWH.V_IL_DIM_RELATIONSHIP_SNOMED_CID<br/>WHERE	1=1<br/>AND	   (1=0<br/>	OR	RESN_PARENT_COSN_NK = 428527002<br/>	OR	RESN_CHILD_COSN_NK =  428527002<br/>	   )</p><p>-- Query Diagnosis Mapping SnomedCT to ICD10-CM<br/>SELECT	s.DMSN_BK, s.DMSN_COSN_BK, c.COSN_FULLY_SPECIFIED_NAME, s.DMSN_MAP_GROUP, s.DMSN_MAP_PRIORITY, s.DMSN_MAP_RULE, s.DMSN_MAP_ADVICE, s.DIA_NK, -- Fields from Snomed<br/>		d.DIA, d.* â€“ All fields from DIM_DIAGNOSIS<br/>FROM	CDWH.V_IL_DIM_DIAGNOSIS_MAPPING_SNOMED_CID s<br/>		INNER JOIN CDWH.V_IL_DIM_DIAGNOSIS_CID d ON d.DIA_NK = s.DIA_NK AND d.DIA_CODE_SYSTEM_VERSION_NK = '10-GM-2022' -- We do not have ICD-10-CM, here restrict to a version of ICD catalog<br/>		INNER JOIN CDWH.V_IL_DIM_CONCEPT_SNOMED_CID c ON c.COSN_BK = s.DMSN_COSN_BK -- Join to get the Fully Specified Name of the concept<br/>WHERE	1=1<br/>AND		s.DIA_NK LIKE 'C75.1%' --Query for a specific ICD diagnosis<br/>AND		s.DMSN_ACTIVE_FLAG = 1 -- Active diagnostic mappings only<br/>ORDER BY s.DMSN_BK, d.DIA_BK</p><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Okt. 26, 2023 18:02</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
